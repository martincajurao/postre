import{_ as z}from"./best-seller-fsZqAuU8.js";import"./index-4JLtwh0j.js";import{N as A,O as T,a6 as D,az as F,a1 as j,r as R,c as y,H as C,Q as M,j as n,R as U,i as E,u as $,m as w,f as m,k as i,e as h,F as S,A as N,B as O,z as Q,h as l,D as g,E as H,x as I,V as q,l as _,aA as G,an as L,J,q as W,L as K,I as X,aB as Y}from"./index-B7PGE_pd.js";import{V as Z,a as ee,c as te,b as ae}from"./VSpacer-Ves0izzE.js";import{b as oe,V as B,f as se,c as ne}from"./VOverlay-J_OMyWXK.js";const re=T({id:String,interactive:Boolean,text:String,...U(ne({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),ie=A()({name:"VTooltip",props:re(),emits:{"update:modelValue":a=>!0},setup(a,V){let{slots:u}=V;const f=D(a,"modelValue"),{scopeId:x}=oe(),c=F(),v=j(()=>a.id||`v-tooltip-${c}`),p=R(),P=y(()=>a.location.split(" ").length>1?a.location:a.location+" center"),s=y(()=>a.origin==="auto"||a.origin==="overlap"||a.origin.split(" ").length>1||a.location.split(" ").length>1?a.origin:a.origin+" center"),r=j(()=>a.transition!=null?a.transition:f.value?"scale-transition":"fade-transition"),o=y(()=>C({"aria-describedby":v.value},a.activatorProps));return M(()=>{const e=B.filterProps(a);return n(B,C({ref:p,class:["v-tooltip",{"v-tooltip--interactive":a.interactive},a.class],style:a.style,id:v.value},e,{modelValue:f.value,"onUpdate:modelValue":t=>f.value=t,transition:r.value,absolute:!0,location:P.value,origin:s.value,persistent:!0,role:"tooltip",activatorProps:o.value,_disableGlobalStack:!0},x),{activator:u.activator,default:function(){var k;for(var t=arguments.length,b=new Array(t),d=0;d<t;d++)b[d]=arguments[d];return((k=u.default)==null?void 0:k.call(u,...b))??a.text}})}),se({},p)}}),le={style:{position:"relative"}},ce={class:"d-flex align-center justify-center fill-height"},de={class:"d-flex justify-end align-end h-100"},ue={class:"text-h5 font-weight-bold bg-red-accent-4 px-4 py-2"},me={class:"text-grey-lighten-1"},fe={class:"d-flex flex-wrap justify-start"},ge={class:"text-body-2 mr-1 mt-2"},ve={key:0,class:"mt-2"},pe=["src"],be={class:"text-h4"},Pe={__name:"Combo",props:{data:{type:Object,default:()=>({})}},setup(a){function V(s,r){fetch(s,{mode:"cors"}).then(o=>o.blob()).then(o=>{const e=document.createElement("a");e.href=URL.createObjectURL(o),e.download=r?`${r}.jpg`:"image.jpg",document.body.appendChild(e),e.click(),setTimeout(()=>{URL.revokeObjectURL(e.href),document.body.removeChild(e)},100)}).catch(()=>{window.open(s,"_blank")})}const u=E("emitter"),f=$(),x=R(!1),c=a,v=y(()=>(console.log("Debug comboList data:",c.data),c.data?Array.isArray(c.data)?c.data:Object.values(c.data):[]));function p(s){if(!s||!s.members)return 0;const r=e=>{if(typeof e=="string"){const b=e.replace(/[^0-9.-]+/g,""),d=parseFloat(b);return isNaN(d)?0:d}const t=Number(e);return isNaN(t)?0:t};return Object.values(s.members).reduce((e,t)=>t.menuPrices&&t.menuPrices.medium?e+r(t.menuPrices.medium):t.menuPrice?e+r(t.menuPrice):e,0)}function P(s){if(s.members){const r={};Object.keys(s.members).forEach(o=>{const t={...s.members[o]};t.buyQty=Number(t.buyQty)||1,typeof t.menuPrices=="object"&&t.menuPrices!==null?t.selectedSize=t.menuPrices.medium?"medium":Object.keys(t.menuPrices)[0]:t.selectedSize=null,r[o]=t}),s.members=r}s.disc=Number(s.disc||0),f.combo[s.name]=s,u.emit("add-combo",s)}return(s,r)=>(m(),w(ae,null,{default:i(()=>[n(Z,{class:"d-flex align-center"},{default:i(()=>[(m(!0),h(S,null,N(v.value,o=>(m(),w(ee,{cols:"12",sm:"6",md:"4",key:o.name,style:{position:"relative"}},{default:i(()=>[n(O,{class:"best-seller",src:z,width:"150",cover:""}),n(Q,{loading:x.value,class:"mx-auto my-2",style:{position:"relative"}},{loader:i(({isActive:e})=>[n(Y,{active:e,color:"deep-purple",height:"4",indeterminate:""},null,8,["active"])]),default:i(()=>[l("div",le,[n(O,{cover:"",src:o.img},{placeholder:i(()=>[l("div",ce,[n(H,{color:"deep-purple",indeterminate:""})])]),default:i(()=>[l("div",de,[l("h4",ue,g(o.name),1)])]),_:2},1032,["src"]),n(I,{icon:"",class:"download-btn",size:"small",style:{position:"absolute",top:"8px",right:"8px",background:"transparent",color:"#fff","box-shadow":"none","z-index":"2",border:"none"},onClick:e=>V(o.img,o.name),"aria-label":"Download image"},{default:i(()=>[n(q,{color:"#fff"},{default:i(()=>r[0]||(r[0]=[_("mdi-download")])),_:1,__:[0]})]),_:2},1032,["onClick"])]),n(G,null,{default:i(()=>[l("h3",null,g(o.desc),1),n(L,{class:"mt-1",size:"small",color:"green-accent-4"},{default:i(()=>[_("Save ₱"+g(Number(o.disc).toLocaleString()),1)]),_:2},1024)]),_:2},1024),n(J,null,{default:i(()=>[l("div",me,[r[1]||(r[1]=l("h4",{class:"text-body-2"}," Package Inclusion:",-1)),l("div",fe,[(m(!0),h(S,null,N(o.members,e=>(m(),h("div",ge,[n(ie,null,{activator:i(({props:t})=>[l("span",C({ref_for:!0},t),[n(L,{color:"",size:"small"},{default:i(()=>[_(g(e.menuName),1)]),_:2},1024)],16)]),default:i(()=>[e.img?(m(),h("div",ve,[l("img",{src:e.img,height:"150",style:{"object-fit":"cover"},alt:""},null,8,pe)])):W("",!0)]),_:2},1024)]))),256))])])]),_:2},1024),n(K,{class:"mx-4 mb-1"}),n(X,{class:"px-4 pb-4 pt-3"},{default:i(()=>[n(I,{"prepend-icon":"mdi-cart",class:"px-3",color:"#DF2C00",variant:"flat",onClick:e=>P(o)},{default:i(()=>r[2]||(r[2]=[_(" order ")])),_:2,__:[2]},1032,["onClick"]),n(te),l("h3",be," ₱"+g(Number(Math.max(0,p(o)-(o.disc||0))).toLocaleString()),1)]),_:2},1024)]),_:2},1032,["loading"])]),_:2},1024))),128))]),_:1})]),_:1}))}};export{Pe as _};
